@model IEnumerable<MovieApp.Models.Movie>

@{
    ViewData["Title"] = "Movies";
    var currentFilter = ViewData["CurrentFilter"] as string;
    var currentSort = ViewData["CurrentSort"] as string;
}

<body id="content">
<h2>Movies</h2>
    <form method="get">
        <div class="form-group">
            <input type="text" name="searchString" value="@currentFilter" placeholder="Search by title" />
            <button type="submit" class="btn btn-primary">Search</button>
        </div>
        <div class="form-group">
            <label>Sort by:</label>
            <a asp-action="Index" asp-route-searchString="@currentFilter" asp-route-sortOrder="title_desc">Title (Descending)</a> |
            <a asp-action="Index" asp-route-searchString="@currentFilter" asp-route-sortOrder="release_asc">Release Date (Ascending)</a> |
            <a asp-action="Index" asp-route-searchString="@currentFilter" asp-route-sortOrder="release_desc">Release Date (Descending)</a> |
            <a asp-action="Index" asp-route-searchString="@currentFilter" asp-route-sortOrder="rating_asc">Rating (Ascending)</a> |
            <a asp-action="Index" asp-route-searchString="@currentFilter" asp-route-sortOrder="rating_desc">Rating (Descending)</a>
        </div>
    </form>

<table class="table" id="movietable">
    <thead>
        <tr>
            <th>Title</th>
            <th>Release Date</th>
            <th>Rating</th>
            <th>View Reviews</th>
        </tr>
    </thead>
    <tbody>
        @{
        @foreach(var Movie in Model){
            <tr>
                <td>@Movie.Title</td>
                <td>@Movie.ReleaseDate.ToShortDateString()</td>
                <td>@Movie.Rating</td>
                    <!-- View Reviews button -->
                    <td>
                        <button type="button" class="btn btn-primary" onclick="location.href='@Url.Action("ViewReviews", "Review", new { movieId = Movie.MovieId })'">
                            View Reviews
                        </button>
                      
                    </td>
                 @{
                    // <td>
                     <!-- Create Review button -->
                    //  

                     
                    // //  <a asp-action="Create" asp-controller="Review" asp-route-movieId="@Movie.MovieId" class="btn btn-success" />
                    // //        Create Review
                        
                    // // </td>  
                    //  }
                    // }
                    }
                </tr>

        }
        }
    </tbody>
</table>
</body>

<style>


</style>
